# üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–∏—á–µ—Å–∫–∏—Ö –Ω–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–π –≤ –ø—Ä–æ–µ–∫—Ç–µ

## ‚ùå –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –ø—Ä–æ–±–ª–µ–º—ã (–ò–°–ü–†–ê–í–õ–ï–ù–û ‚úÖ)

### 1. **–î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ projects –≤ TimeTracker.tsx** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–§–∞–π–ª:** `components/TimeTracker.tsx` (—Å—Ç—Ä–æ–∫–∏ 295-311)

**–ü—Ä–æ–±–ª–µ–º–∞:** –û–¥–Ω–∞ –∏ —Ç–∞ –∂–µ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –¥–≤–∞–∂–¥—ã –ø–æ–¥—Ä—è–¥:
```typescript
// –ü–µ—Ä–≤–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å—Ç—Ä–æ–∫–∏ 295-302)
if (!projects || !Array.isArray(projects)) {
  toast({ ... });
  return;
}
// –í—Ç–æ—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ (—Å—Ç—Ä–æ–∫–∏ 304-311) - –î–£–ë–õ–ò–ö–ê–¢!
if (!projects || !Array.isArray(projects)) {
  toast({ ... });
  return;
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:** 
- –ò–∑–±—ã—Ç–æ—á–Ω—ã–π –∫–æ–¥
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞ –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –£–¥–∞–ª–µ–Ω–∞ –¥—É–±–ª–∏—Ä—É—é—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞.

---

### 2. **TimeEntryDialog –ø–æ–∑–≤–æ–ª—è–µ—Ç –∞–¥–º–∏–Ω—É —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞** ‚úÖ –ò–°–ü–†–ê–í–õ–ï–ù–û
**–§–∞–π–ª:** `components/admin/TimeEntryDialog.tsx` (—Å—Ç—Ä–æ–∫–∏ 173-177)

**–ü—Ä–æ–±–ª–µ–º–∞:** –í UI –∞–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—ã–±—Ä–∞—Ç—å "No project" –¥–ª—è time entry —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞, –Ω–æ –±—ç–∫–µ–Ω–¥ —ç—Ç–æ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç. –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø–ª–æ—Ö–æ–π UX - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç —É—Å–ø–µ—à–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ, –Ω–æ –∑–∞—Ç–µ–º –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É.

**–ö–æ–¥:**
```typescript
if (formData.projectId && formData.projectId !== 'none') {
  payload.projectId = formData.projectId;
} else {
  payload.projectId = null; // ‚ùå –ú–æ–∂–µ—Ç –±—ã—Ç—å null –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞
}
```

**–ë—ç–∫–µ–Ω–¥ –≤–∞–ª–∏–¥–∞—Ü–∏—è (—Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ):**
```typescript
if (entryUser?.role === UserRole.EMPLOYEE) {
  throw new BadRequestException('Project is required for employees...');
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–ª–æ—Ö–æ–π UX - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å —É–¥–∞–ª–∏—Ç—å –ø—Ä–æ–µ–∫—Ç, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É
- –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º

**–†–µ—à–µ–Ω–∏–µ:** ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ - –µ—Å–ª–∏ entry –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É, –æ–ø—Ü–∏—è "No project" –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è. –ö–æ–º–ø–æ–Ω–µ–Ω—Ç —Ç–µ–ø–µ—Ä—å –ø–æ–ª—É—á–∞–µ—Ç `users` –∏–∑ store –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è entry –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –æ–ø—Ü–∏–∏.

---

### 3. **–ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å time entry –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –±–µ–∑ –ø—Ä–æ–µ–∫—Ç–∞ —á–µ—Ä–µ–∑ API**
**–§–∞–π–ª:** `server/src/time-entries/time-entries.controller.ts` (—Å—Ç—Ä–æ–∫–∞ 33)

**–ü—Ä–æ–±–ª–µ–º–∞:** –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç –≤—ã–∑–≤–∞—Ç—å API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è time entry —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞ –±–µ–∑ `projectId`. –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä–∏—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è (–¥–ª—è –∫–æ–≥–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è entry), –Ω–æ —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ–æ—á–µ–≤–∏–¥–Ω–æ –¥–ª—è –∞–¥–º–∏–Ω–∞.

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
```typescript
// –ö–æ–Ω—Ç—Ä–æ–ª–ª–µ—Ä –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∞–≤–∞ –Ω–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –¥–ª—è –¥—Ä—É–≥–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
if (user.role !== UserRole.OWNER && ...) {
  if (createTimeEntryDto.userId !== user.id) {
    throw new ForbiddenException('You can only create time entries for yourself');
  }
}
// –°–µ—Ä–≤–∏—Å –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Ä–æ–ª—å –ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–Ø (–¥–ª—è –∫–æ–≥–æ —Å–æ–∑–¥–∞–µ—Ç—Å—è entry)
if (user.role === UserRole.EMPLOYEE && !dto.projectId) {
  throw new BadRequestException('Project is required for employees...');
}
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ê–¥–º–∏–Ω –º–æ–∂–µ—Ç —Å–ª—É—á–∞–π–Ω–æ —Å–æ–∑–¥–∞—Ç—å –Ω–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω—É—é –∑–∞–ø–∏—Å—å
- –û—à–∏–±–∫–∞ –±—É–¥–µ—Ç —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ API

**–†–µ—à–µ–Ω–∏–µ:** –≠—Ç–æ –Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ - –±—ç–∫–µ–Ω–¥ –≤–∞–ª–∏–¥–∞—Ü–∏—è —Å—Ä–∞–±–æ—Ç–∞–µ—Ç. –ù–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å UX –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ, –µ—Å–ª–∏ –µ—Å—Ç—å UI –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∑–∞–ø–∏—Å–µ–π –æ—Ç –∏–º–µ–Ω–∏ –¥—Ä—É–≥–∏—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π.

---

## ‚ö†Ô∏è –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### 4. **Race condition –ø—Ä–∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞**
**–§–∞–π–ª:** `lib/store.ts` (—Å—Ç—Ä–æ–∫–∏ 960-964) –∏ `server/src/time-entries/time-entries.service.ts` (—Å—Ç—Ä–æ–∫–∏ 71-85)

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç `activeTimeEntry` –ø–µ—Ä–µ–¥ –≤—ã–∑–æ–≤–æ–º API
- –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –∞–∫—Ç–∏–≤–Ω—ã–µ –∑–∞–ø–∏—Å–∏ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- –ù–æ –º–µ–∂–¥—É –ø—Ä–æ–≤–µ—Ä–∫–æ–π –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏ –∑–∞–ø—Ä–æ—Å–æ–º –∫ API –º–æ–∂–µ—Ç –ø—Ä–æ–π—Ç–∏ –≤—Ä–µ–º—è, –∏ –¥—Ä—É–≥–æ–π –∑–∞–ø—Ä–æ—Å –º–æ–∂–µ—Ç —Å–æ–∑–¥–∞—Ç—å –∞–∫—Ç–∏–≤–Ω—É—é –∑–∞–ø–∏—Å—å

**–¢–µ–∫—É—â–∞—è –∑–∞—â–∏—Ç–∞:**
- –ë—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (–ø—Ä–∞–≤–∏–ª—å–Ω–æ)
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –¥–ª—è UX (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –ª–∏—à–Ω–∏–µ –∑–∞–ø—Ä–æ—Å—ã)

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ú–∏–Ω–∏–º–∞–ª—å–Ω—ã–µ - –±—ç–∫–µ–Ω–¥ –≤—Å–µ —Ä–∞–≤–Ω–æ –∑–∞–±–ª–æ–∫–∏—Ä—É–µ—Ç –¥—É–±–ª–∏–∫–∞—Ç
- –ù–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç —É–≤–∏–¥–µ—Ç—å –æ—à–∏–±–∫—É –≤–º–µ—Å—Ç–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

**–†–µ—à–µ–Ω–∏–µ:** –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–∞, –Ω–æ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ - –µ—Å–ª–∏ –±—ç–∫–µ–Ω–¥ –≤–µ—Ä–Ω—É–ª –æ—à–∏–±–∫—É –æ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–º –∞–∫—Ç–∏–≤–Ω–æ–º —Ç–∞–π–º–µ—Ä–µ, –æ–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ.

---

### 5. **–ù–µ—Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ —Ñ–æ—Ä–º–∞—Ç–∞ —Ä–æ–ª–µ–π –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º**
**–§–∞–π–ª:** –ú–Ω–æ–∂–µ—Å—Ç–≤–æ —Ñ–∞–π–ª–æ–≤

**–ü—Ä–æ–±–ª–µ–º–∞:** 
- –§—Ä–æ–Ω—Ç–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `'employee'` (lowercase)
- –ë—ç–∫–µ–Ω–¥ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç: `UserRole.EMPLOYEE` (uppercase enum)

**–¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:**
- API –º–∞–ø–ø–∏—Ç —Ä–æ–ª–∏ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ –¥–∞–Ω–Ω—ã—Ö (—á–µ—Ä–µ–∑ `mapUser`, `mapTimeEntry`)
- –≠—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–µ—Ç –±—ã—Ç—å –∏—Å—Ç–æ—á–Ω–∏–∫–æ–º –ø—É—Ç–∞–Ω–∏—Ü—ã

**–ü—Ä–∏–º–µ—Ä—ã:**
```typescript
// –§—Ä–æ–Ω—Ç–µ–Ω–¥
if (currentUser.role === 'employee') { ... }

// –ë—ç–∫–µ–Ω–¥
if (user.role === UserRole.EMPLOYEE) { ... }
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è –ø—É—Ç–∞–Ω–∏—Ü–∞ –ø—Ä–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ
- –†–∏—Å–∫ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –ø—Ä—è–º–æ–º —Å—Ä–∞–≤–Ω–µ–Ω–∏–∏

**–†–µ—à–µ–Ω–∏–µ:** –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –º–æ–∂–Ω–æ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å enum –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ –∏–ª–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç—ã.

---

### 6. **–õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è activeTimeEntry —á–µ—Ä–µ–∑ WebSocket**
**–§–∞–π–ª:** `hooks/useSocket.ts` (—Å—Ç—Ä–æ–∫–∏ 197-214) –∏ `lib/store.ts` (—Å—Ç—Ä–æ–∫–∏ 122-147)

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `activeTimeEntry` —á–µ—Ä–µ–∑ WebSocket –º–æ–∂–µ—Ç –ø—Ä–∏–≤–µ—Å—Ç–∏ –∫ —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è.

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
```typescript
// –í useSocket.ts
if (isCurrentUserEntry) {
  if (entry.status === 'stopped' && isActive) {
    useStore.setState({ activeTimeEntry: null });
  }
  else if ((entry.status === 'running' || entry.status === 'paused') && isActive) {
    useStore.setState({ activeTimeEntry: entry });
  }
  // ...
}

// –í store.ts addTimeEntry
const shouldSetActive = 
  (entry.status === 'running' || entry.status === 'paused') 
    && entry.userId === state.currentUser?.id;
// –°–ª–æ–∂–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –ø–µ—Ä–µ–∑–∞–ø–∏—Å–∏...
```

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω–∞—è —Ä–∞—Å—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- –°–ª–æ–∂–Ω–æ—Å—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫–∏

**–†–µ—à–µ–Ω–∏–µ:** –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –∏–ª–∏ –¥–æ–±–∞–≤–∏—Ç—å –±–æ–ª—å—à–µ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤. –¢–µ–∫—É—â–∞—è —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ —Å–ª–æ–∂–Ω–∞ –¥–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è.

---

### 7. **–í–∞–ª–∏–¥–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –≤ TimeEntryDialog –Ω–µ —É—á–∏—Ç—ã–≤–∞–µ—Ç —Ä–æ–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
**–§–∞–π–ª:** `components/admin/TimeEntryDialog.tsx`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü—Ä–∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ time entry –Ω–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –≤–ª–∞–¥–µ–ª–µ—Ü –∑–∞–ø–∏—Å–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º. –ï—Å–ª–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫, –Ω–µ–ª—å–∑—è —É–¥–∞–ª—è—Ç—å –ø—Ä–æ–µ–∫—Ç.

**–¢–µ–∫—É—â–∞—è –ª–æ–≥–∏–∫–∞:**
- UI –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—ã–±—Ä–∞—Ç—å "No project"
- –ë—ç–∫–µ–Ω–¥ –±–ª–æ–∫–∏—Ä—É–µ—Ç, –µ—Å–ª–∏ entry –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∏—Ç —Å–æ—Ç—Ä—É–¥–Ω–∏–∫—É
- –ù–æ –Ω–µ—Ç –ø—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏ –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ

**–ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è:**
- –ü–ª–æ—Ö–æ–π UX - –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–∏–¥–∏—Ç –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å, –Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è entry –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –æ–ø—Ü–∏–∏ "No project".

---

## ‚úÖ –ü–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã

1. **–í–∞–ª–∏–¥–∞—Ü–∏—è –Ω–∞ –¥–≤—É—Ö —É—Ä–æ–≤–Ω—è—Ö** - —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ –∏ –±—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è—é—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–æ–µ–∫—Ç–∞ –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤
2. **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ –±—ç–∫–µ–Ω–¥–µ** - –ø—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
3. **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫** - –±—ç–∫–µ–Ω–¥ –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö
4. **–ó–∞—â–∏—Ç–∞ –æ—Ç race conditions** - –±—ç–∫–µ–Ω–¥ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

## üìã –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
1. ‚úÖ –ò—Å–ø—Ä–∞–≤–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –≤ `TimeTracker.tsx`
2. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å –≤–∞–ª–∏–¥–∞—Ü–∏—é –≤ `TimeEntryDialog` –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —É–¥–∞–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–∞ —É —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
3. ‚ö†Ô∏è –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫ –ø—Ä–∏ race condition –∞–∫—Ç–∏–≤–Ω–æ–≥–æ —Ç–∞–π–º–µ—Ä–∞
4. ‚ö†Ô∏è –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Ä–æ–ª–∏ –≤ `TimeEntryDialog` –ø–µ—Ä–µ–¥ –ø–æ–∫–∞–∑–æ–º –æ–ø—Ü–∏–∏ "No project"

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç:
5. üí° –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Ñ–æ—Ä–º–∞—Ç —Ä–æ–ª–µ–π –º–µ–∂–¥—É —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º –∏ –±—ç–∫–µ–Ω–¥–æ–º
6. üí° –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `activeTimeEntry` —á–µ—Ä–µ–∑ WebSocket

---

## üîß –ë—ã—Å—Ç—Ä—ã–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–¥–∞–ª–∏—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ–≤–µ—Ä–∫–∏
```typescript
// components/TimeTracker.tsx, —Å—Ç—Ä–æ–∫–∏ 293-321
if (selectedProject !== 'none') {
  // –£–¥–∞–ª–∏—Ç—å –ø–µ—Ä–≤—É—é –ø—Ä–æ–≤–µ—Ä–∫—É (—Å—Ç—Ä–æ–∫–∏ 295-302)
  // –û—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ –æ–¥–Ω—É –ø—Ä–æ–≤–µ—Ä–∫—É (—Å—Ç—Ä–æ–∫–∏ 304-311)
  if (!projects || !Array.isArray(projects)) {
    toast({
      title: 'Error',
      description: 'Projects data is not available. Please refresh the page.',
      variant: 'destructive',
    });
    return;
  }
  const projectExists = projects.find((p) => p.id === selectedProject && p.status === 'active');
  // ...
}
```

### 2. –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É –≤ TimeEntryDialog
```typescript
// components/admin/TimeEntryDialog.tsx
// –ù—É–∂–Ω–æ –ø–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ entry
// –ï—Å–ª–∏ entry.userId –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å - —Å–æ—Ç—Ä—É–¥–Ω–∏–∫, –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å "No project"
```

