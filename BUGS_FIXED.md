# üêõ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –±–∞–≥–∏

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ —ç—Ç–æ–º —Å–µ–∞–Ω—Å–µ

### 1. **–ü—Ä–æ–±–ª–µ–º–∞ —Å–æ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞–º–∏ - –±—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ**
**–ü—Ä–æ–±–ª–µ–º–∞:** –£ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π (8 –∏–∑ 9) –±—Ä–∞—É–∑–µ—Ä –Ω–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–ª —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –Ω–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç.

**–ü—Ä–∏—á–∏–Ω–∞:** `getDisplayMedia` –≤—ã–∑—ã–≤–∞–ª—Å—è –ø–æ—Å–ª–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (`startTimer`), –∏ –æ–∫–Ω–æ user gesture –∏—Å—Ç–µ–∫–∞–ª–æ.

**–†–µ—à–µ–Ω–∏–µ:**
- `getDisplayMedia` —Ç–µ–ø–µ—Ä—å –≤—ã–∑—ã–≤–∞–µ—Ç—Å—è **–¥–æ** `startTimer`
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è `requestAnimationFrame` –≤–º–µ—Å—Ç–æ `setTimeout`
- Stream –ø–æ–ª—É—á–∞–µ—Ç—Å—è —Å—Ä–∞–∑—É, –¥–∞–∂–µ –µ—Å–ª–∏ `timeEntryId` –µ—â–µ –Ω–µ –¥–æ—Å—Ç—É–ø–µ–Ω
- `timeEntryId` –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ `useEffect` –ø–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è

**–§–∞–π–ª—ã:** `components/TimeTracker.tsx`, `hooks/useScreenCapture.ts`

---

### 2. **–£—Ç–µ—á–∫–∞ stream –ø—Ä–∏ –æ—à–∏–±–∫–µ startTimer**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ `startTimer` —É–ø–∞–¥–µ—Ç —Å –æ—à–∏–±–∫–æ–π, –Ω–æ `startScreenshotCapture` —É–∂–µ –Ω–∞—á–∞–ª —Ä–∞–±–æ—Ç–∞—Ç—å, stream –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –∞–∫—Ç–∏–≤–Ω—ã–º –≤ –ø–∞–º—è—Ç–∏.

**–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ - –µ—Å–ª–∏ `startTimer` —É–ø–∞–¥–µ—Ç, —Å–∫—Ä–∏–Ω—à–æ—Ç capture –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è.

**–§–∞–π–ª:** `components/TimeTracker.tsx` (—Å—Ç—Ä–æ–∫–∏ 377-394)

---

### 3. **timeEntryId –Ω–µ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –ø—Ä–∏ —Å–º–µ–Ω–µ —Ç–∞–π–º–µ—Ä–∞**
**–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç –Ω–æ–≤—ã–π —Ç–∞–π–º–µ—Ä, `timeEntryId` –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º –æ–±—ä–µ–∫—Ç–µ –Ω–µ –æ–±–Ω–æ–≤–ª—è–ª—Å—è.

**–†–µ—à–µ–Ω–∏–µ:** –õ–æ–≥–∏–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è `timeEntryId` —Ç–µ–ø–µ—Ä—å –æ–±–Ω–æ–≤–ª—è–µ—Ç –µ–≥–æ –¥–∞–∂–µ –µ—Å–ª–∏ –æ–Ω —É–∂–µ –±—ã–ª —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω.

**–§–∞–π–ª:** `hooks/useScreenCapture.ts` (—Å—Ç—Ä–æ–∫–∏ 1755-1774)

---

## ‚úÖ –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–Ω–µ–µ (–∏–∑ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –≤ –∫–æ–¥–µ)

–ö–æ–¥ —Å–æ–¥–µ—Ä–∂–∏—Ç –º–Ω–æ–∂–µ—Å—Ç–≤–æ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤ –æ —Ä–∞–Ω–µ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã—Ö –±–∞–≥–∞—Ö:
- Bug 86: –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–∏ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞—Ö
- Bug 111: –ö–æ–Ω–∫—É—Ä–µ–Ω—Ç–Ω—ã–µ –∑–∞–≥—Ä—É–∑–∫–∏
- Bug 114: –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω—ã—Ö –æ—à–∏–±–æ–∫
- Bug 115: –í–∞–ª–∏–¥–∞—Ü–∏—è canvas context
- Bug 116: –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è video –≤ DOM
- Bug 119: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ drawImage
- Bug 120/121: Race conditions —Å —Ä–∞–∑–º–µ—Ä–∞–º–∏ video
- –ò –º–Ω–æ–≥–∏–µ –¥—Ä—É–≥–∏–µ...

---

## üîç –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ)

### 1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–º–µ–Ω—ã —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è**
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–ª—É—á–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –µ—Å–ª–∏ –æ—Ç–º–µ–Ω–∏—Ç –∏–ª–∏ –æ—Ç–∫–∞–∂–µ—Ç –≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–∏. Stream –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ—á–∏—â–∞–µ—Ç—Å—è.

### 2. **–ò–Ω—Ç–µ—Ä–≤–∞–ª —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ timeEntryId**
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –ò–Ω—Ç–µ—Ä–≤–∞–ª –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ `timeEntryId` –ø–µ—Ä–µ–¥ –∑–∞—Ö–≤–∞—Ç–æ–º –∫–∞–¥—Ä–∞ (—Å—Ç—Ä–æ–∫–∞ 963, 1178 –≤ `useScreenCapture.ts`).

### 3. **Cleanup –ø—Ä–∏ unmount**
‚úÖ **–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ:** –õ–æ–≥–∏–∫–∞ cleanup –ø—Ä–æ–≤–µ—Ä—è–µ—Ç, –∞–∫—Ç–∏–≤–µ–Ω –ª–∏ —Ç–∞–π–º–µ—Ä, –∏ –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç capture, –µ—Å–ª–∏ —Ç–∞–π–º–µ—Ä –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üìù –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ —É–ª—É—á—à–µ–Ω–∏—è

1. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:** –î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è:
   - –ü—Ä–æ—Ü–µ–Ω—Ç —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
   - –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –æ—Ç–∫–∞–∑–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
   - –í—Ä–µ–º—è –º–µ–∂–¥—É –∫–ª–∏–∫–æ–º –∏ –ø–æ–ª—É—á–µ–Ω–∏–µ–º —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è

2. **UX —É–ª—É—á—à–µ–Ω–∏—è:**
   - –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–æ–ª–µ–µ –ø–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
   - –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–ü–æ–≤—Ç–æ—Ä–∏—Ç—å –∑–∞–ø—Ä–æ—Å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è" –µ—Å–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–º–µ–Ω–∏–ª

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –†–∞—Å—Å–º–æ—Ç—Ä–µ—Ç—å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—é —Ä–∞–∑–º–µ—Ä–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ (—Å–∂–∞—Ç–∏–µ)
   - –î–æ–±–∞–≤–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ —Å–∫—Ä–∏–Ω—à–æ—Ç–æ–≤ –ø—Ä–∏ –º–µ–¥–ª–µ–Ω–Ω–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏

---

## ‚úÖ –ò—Ç–æ–≥

–í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –±–∞–≥–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã. –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É. –û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:
- ‚úÖ –ë—Ä–∞—É–∑–µ—Ä —Ç–µ–ø–µ—Ä—å –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ —É –≤—Å–µ—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- ‚úÖ –ù–µ—Ç —É—Ç–µ—á–µ–∫ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö
- ‚úÖ timeEntryId –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ

